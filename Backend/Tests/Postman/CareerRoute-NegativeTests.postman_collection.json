{
  "info": {
    "_postman_id": "careerroute-negative-tests",
    "name": "CareerRoute - Negative Tests",
    "description": "Negative test cases for error handling validation:\n- Invalid authentication\n- Invalid inputs\n- Unauthorized access\n- Not found resources\n- Business rule violations",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "1. Authentication Errors",
      "item": [
        {
          "name": "1.1 Login - Invalid Email",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Returns 400 or 401', () => {",
                  "    pm.expect(pm.response.code).to.be.oneOf([400, 401]);",
                  "});",
                  "",
                  "pm.test('Has error message', () => {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json.message || json.error).to.exist;",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"email\": \"invalid-email\",\n    \"password\": \"Test@123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "login"]
            }
          }
        },
        {
          "name": "1.2 Login - Wrong Password",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Returns 401', () => pm.response.to.have.status(401));",
                  "",
                  "pm.test('Has error message', () => {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json.message || json.error).to.exist;",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"email\": \"{{menteeEmail}}\",\n    \"password\": \"WrongPassword123!\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "login"]
            }
          }
        },
        {
          "name": "1.3 Login - Missing Fields",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Returns 400', () => pm.response.to.have.status(400));"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "login"]
            }
          }
        }
      ]
    },
    {
      "name": "2. Authorization Errors",
      "item": [
        {
          "name": "2.1 Access Protected Route - No Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Returns 401', () => pm.response.to.have.status(401));"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/sessions/upcoming",
              "host": ["{{baseUrl}}"],
              "path": ["sessions", "upcoming"]
            }
          }
        },
        {
          "name": "2.2 Access Protected Route - Invalid Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Returns 401', () => pm.response.to.have.status(401));"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [{"key": "Authorization", "value": "Bearer invalid.token.here"}],
            "url": {
              "raw": "{{baseUrl}}/sessions/upcoming",
              "host": ["{{baseUrl}}"],
              "path": ["sessions", "upcoming"]
            }
          }
        },
        {
          "name": "2.3 Access Protected Route - Expired Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Returns 401', () => pm.response.to.have.status(401));"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [{"key": "Authorization", "value": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwiZXhwIjoxfQ.invalid"}],
            "url": {
              "raw": "{{baseUrl}}/sessions/upcoming",
              "host": ["{{baseUrl}}"],
              "path": ["sessions", "upcoming"]
            }
          }
        }
      ]
    },
    {
      "name": "3. Not Found Errors",
      "item": [
        {
          "name": "3.1 Get Non-Existent Mentor",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Returns 404', () => pm.response.to.have.status(404));"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/mentors/00000000-0000-0000-0000-000000000000",
              "host": ["{{baseUrl}}"],
              "path": ["mentors", "00000000-0000-0000-0000-000000000000"]
            }
          }
        },
        {
          "name": "3.2 Get Non-Existent Session",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Returns 404', () => pm.response.to.have.status(404));"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [{"key": "Authorization", "value": "Bearer {{token}}"}],
            "url": {
              "raw": "{{baseUrl}}/sessions/00000000-0000-0000-0000-000000000000",
              "host": ["{{baseUrl}}"],
              "path": ["sessions", "00000000-0000-0000-0000-000000000000"]
            }
          }
        }
      ]
    },
    {
      "name": "4. Validation Errors",
      "item": [
        {
          "name": "4.1 Book Session - Invalid Time Slot ID",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Returns 400 or 404', () => {",
                  "    pm.expect(pm.response.code).to.be.oneOf([400, 404]);",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {"key": "Content-Type", "value": "application/json"},
              {"key": "Authorization", "value": "Bearer {{token}}"}
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"timeSlotId\": \"invalid-uuid\",\n    \"topic\": \"Test\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/sessions",
              "host": ["{{baseUrl}}"],
              "path": ["sessions"]
            }
          }
        },
        {
          "name": "4.2 Create Payment - Invalid Session ID",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Returns 400 or 404', () => {",
                  "    pm.expect(pm.response.code).to.be.oneOf([400, 404]);",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {"key": "Content-Type", "value": "application/json"},
              {"key": "Authorization", "value": "Bearer {{token}}"}
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"sessionId\": \"00000000-0000-0000-0000-000000000000\",\n    \"paymentProvider\": 1\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/payments/create-intent",
              "host": ["{{baseUrl}}"],
              "path": ["payments", "create-intent"]
            }
          }
        }
      ]
    },
    {
      "name": "5. Business Rule Violations",
      "item": [
        {
          "name": "5.1 Join Session - Not Within Window",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Returns 409 or 400', () => {",
                  "    pm.expect(pm.response.code).to.be.oneOf([400, 409]);",
                  "});",
                  "",
                  "pm.test('Has descriptive error', () => {",
                  "    const json = pm.response.json();",
                  "    pm.expect(json.message || json.error).to.exist;",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [{"key": "Authorization", "value": "Bearer {{token}}"}],
            "url": {
              "raw": "{{baseUrl}}/sessions/{{sessionId}}/join",
              "host": ["{{baseUrl}}"],
              "path": ["sessions", "{{sessionId}}", "join"]
            }
          }
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "test",
      "script": {
        "exec": [
          "pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));"
        ]
      }
    }
  ]
}
